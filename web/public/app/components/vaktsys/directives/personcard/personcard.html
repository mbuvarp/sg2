<div class="person-card">
    <div class="top">
        <div class="image">
            <div style="background-image: url('{{person.image === 'default' ?
                                              '/assets/img/users/default/default' :
                                              '/assets/img/users/' + person.user_id + '/' + person.image }}');"
                 title="{{ person.name }}"></div>
        </div>
        <div class="info">
            <div class="name-role">
                <div class="name">
                    <span ng-bind="person.name" ng-show="!managing[person.user_shift_id].managing"></span>
                    <input type="text" ng-if="hasManagingRights()" ng-show="managing[person.user_shift_id].managing"
                           ng-model="managing[person.user_shift_id].user_name">
                </div>
                <div class="role">
                    <span ng-bind="'[' + person.role + ']'" ng-show="!managing[person.user_shift_id].managing"></span>
                    <select ng-if="hasManagingRights()" ng-show="managing[person.user_shift_id].managing"
                            ng-model="managing[person.user_shift_id].role_id">
                        <option ng-repeat="role in roles" value="{{ role.id }}" ng-bind="role.name"></option>
                    </select>
                </div>
            </div>
            <div class="time start">
                <span class="bold">Starter: </span>
                <span ng-bind="person.start | date:'HH:mm'" ng-show="!managing[person.user_shift_id].managing"></span>
                <datetimepicker value="person.start" filter="d. MMM yyyy, HH:mm" minimized="true" 
                    ng-if="hasManagingRights()" ng-show="managing[person.user_shift_id].managing">
                </datetimepicker>
            </div>
            <div class="time end">
                <span class="bold">Slutter: </span>
                <span ng-bind="person.finish | date:'HH:mm'" ng-show="!managing[person.user_shift_id].managing"></span>
                <datetimepicker value="person.finish" filter="d. MMM yyyy, HH:mm" minimized="true" 
                    ng-if="hasManagingRights()" ng-show="managing[person.user_shift_id].managing">
                </datetimepicker>
            </div>
        </div>
        <div class="manage" ng-if="hasManagingRights()">
            <div class="edit">
                <i class="fa fa-edit" ng-click="setCurrentlyManaging(person.user_shift_id, true);"></i>
            </div>
            <div class="remove" ng-click="">
                <i class="fa fa-remove"></i>
            </div>
        </div>
    </div>
    <div class="bottom">
        <div class="cancel" ng-click="resetManagingChanges(person.user_shift_id);">
            Avbryt
        </div>
        <div class="confirm" ng-click="saveManagingChanges(person.user_shift_id);">
            Lagre
        </div>
    </div>
</div>